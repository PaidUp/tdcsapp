function print(obj) {
  console.log('string' === typeof obj ? obj : JSON.stringify(obj, null, 4));
}

var balanced = require('./lib/balanced.js');

balanced.configure('ak-test-D4i8c5COSld5I3XkSkXIUBLtGhpN6X67');

balanced.marketplace.then(function( mp ) {
    print(mp.in_escrow);
})

balanced.marketplace.cards.create({
    "expiration_month": "12",
    "cvv": "123",
    "number": "4111111111111111",
    "name": "Mike Jones",
    "expiration_year": "2020"
}).then(function(card) {
  print(card);
  
  card.credit({
      "amount": 100,
      "description": "CREDIT"
  }).then(function(transaction_resource) {
    print (transaction_resource)
  }, 
  function (err) {
      print("----------------RAW ERROR---------------");
      console.log(err);
      var error = JSON.parse(err.message).errors[0];
      print("----------------JSON ERROR__________________");
      print(error);
  }) 
});